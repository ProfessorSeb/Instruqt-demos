#!/bin/bash
set -euxo pipefail

npm install -g openclaw 2>/dev/null || true
mkdir -p ~/.openclaw

cat > ~/.openclaw/openclaw.json << 'EOF'
{
  "agents": {
    "defaults": {
      "model": { "primary": "agentgateway/gpt-4o-mini" },
      "workspace": "/root/.openclaw/workspace"
    }
  },
  "models": {
    "providers": {
      "agentgateway": {
        "baseUrl": "http://localhost:8080/openai/v1",
        "apiKey": "agentgateway",
        "api": "openai-completions"
      }
    }
  },
  "gateway": {
    "port": 18789,
    "mode": "local",
    "bind": "loopback",
    "auth": { "mode": "token", "token": "instruqt-lab-token" }
  }
}
EOF

openclaw gateway start
sleep 3
openclaw gateway status
echo "Challenge 6 solved"
