#!/bin/bash
set -euxo pipefail

# Create gpt-4o backend
cat > /root/openai-smart-backend.yaml << 'EOF'
apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  name: openai-smart
  namespace: agentgateway-system
spec:
  ai:
    openAI:
      authHeaderRef:
        name: openai-api-key
        key: Authorization
      model: gpt-4o
EOF

kubectl apply -f /root/openai-smart-backend.yaml

# Verify backend registered
kubectl get agentgatewaybackend -n agentgateway-system

echo "Challenge 5 solved"
