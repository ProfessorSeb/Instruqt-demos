#!/bin/bash
set -euo pipefail

# Verify the gpt-4o backend was created
if ! kubectl get agentgatewaybackend openai-smart -n agentgateway-system &>/dev/null; then
  fail-message "AgentgatewayBackend 'openai-smart' not found. Apply /root/openai-smart-backend.yaml"
fi

# Verify the original gpt-4o-mini backend is still intact
if ! kubectl get agentgatewaybackend openai -n agentgateway-system &>/dev/null; then
  fail-message "Original backend 'openai' is missing. Did you accidentally delete it?"
fi

# Show both registered backends
kubectl get agentgatewaybackend -n agentgateway-system

echo "Challenge 5 passed â€” two model backends registered."
